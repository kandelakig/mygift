<html>
	<head>
		<link rel="stylesheet" type="text/css" href="style/popup.css">
		<script type="text/javascript" src="lib/jquery.js"></script>
		<script type="text/javascript" src="shops.js"></script>
		<script type="text/javascript" src="history.js"></script>
		<script type="text/javascript">
			function showSuggestions(historyItems) {
				historyItems.forEach(function(item, index){
					console.log(index);
					console.log(item);
					if (index%3 == 0) {
						$("table#suggestions-table > tbody").append($("<tr/>", {id: "suggestions-row-"+index/3}));
					}
					$("tr#suggestions-row-"+Math.floor(index/3)).append($("<td/>", {id: "suggestions-cell-"+index}));
					$("td#suggestions-cell-"+index).append($("<a/>", {"href": "#", "onClick": "chrome.tabs.create({url: '" + item.url + "'});"}).append(item.title));
				})
			}

			$(function () { analizeHistory().then(showSuggestions); });
		</script>
	</head>

	<body>
		<div id="popup-box">
			<div>
				<input type="button" id="submit-button" value="Buy it for me!" />
			</div>
			<div id="suggestion-box">
				<label id="suggestions">Suggestions</label>
				<table id="suggestions-table">
					<tbody>
					</tbody>
				</table>
			</div>
		</div>
	</body>
</html>